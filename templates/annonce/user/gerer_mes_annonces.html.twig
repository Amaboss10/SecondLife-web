{% extends 'base.html.twig' %}

{% block title %}{{titre_page}}{% endblock %}

{% block body %}
    <div class="row">
        <div class="col-xl-8 col-sm-12 col-12"  style="margin:1%">
            <div style="margin-bottom:1%">
                <div class="row">
                    <h1 class="col" style="padding-bottom:0.5%">{{ titre_page }}</h1>

                    <form class="btn col offset-xl-6 col-xl-3"  action={{path('secondLife_creer_annonce')}} method='GET' class="link-secondary">
                        <button type="submit" class="btn btn-lg btn-outline-secondary">cree une annonce</button>
                    </form>
                </div>  
            </div>

            <div >
            <!--Annonces de l'utilisateur-->
            {% if mesAnnonces %}
                <p>Vous avez {{nb_annonces}} annonces</p>
                {% for annonce in mesAnnonces %}
                <a href={{path('secondLife_afficher_annonce',{'id':annonce.idAnnonce})}}>
                    <div class="annonce row" style="border-style:solid; border-width:1px; border-color:#818D92; margin-bottom:3%; padding:1.5%">
                        <a href={{path('secondLife_afficher_annonce',{'id':annonce.idAnnonce})}} class="link-dark"><h4 class="titre_annonce">{{annonce.titreAnnonce}}</h4></a>
                        
                        <div class="col image_annonce">
                            <img src={{annonce.imagesAnnonce.first()}} alt={{annonce.titreAnnonce}}>
                        </div>

                        <div class="col infos_annonce">
                            <span class="categorie_annonce">{{annonce.Categorie}}</span><br>
                            <span class="sous_categorie_annonce">{{annonce.SousCategorie}}</span><br>
                            <span class="etat_annonce">{{annonce.etatAnnonce}}</span><br>
                            <span class="date_publication_annonce">{{annonce.datePubliAnnonce|date('d/m/Y')}}</span>
                        </div>

                        <div class="col autres_infos_annonces">
                            <div style="text-align:center; padding-bottom:2%">
                                <span class="prix_annonce" >{{annonce.prixAnnonce | number_format(0, '${.}', '${,}')}} €</span>
                            </div>
                            <form class="lien_ajouter_favoris" style="text-align:center; padding-bottom:2%"  action={{ path('secondLife_ajouter_aux_favoris_utilisateur',{'id':annonce.idAnnonce}) }} method='POST'>
                                <button class="btn btn-sm btn-outline-secondary" >Ajouter aux favoris</button>
                            </form>

                            {% if annonce.etatAnnonce == 'Disponible' %}
                            <form class="lien_modifier_etat"  action={{ path('secondLife_confirmer_vente',{'id':annonce.idAnnonce}) }} method='GET'>
                                <button class="btn btn-sm btn-outline-secondary" >Confirmer la vente</button>
                            </form>
                            {% endif %}
                            
                            <div style="text-align:center">
                                <a href="" class="lien_contacter_vendeur"><button class="btn btn-sm btn-outline-secondary btn_contacter_vendeur" >Contacter le vendeur</button></a>
                            </div>
                        </div>
                    </div>
                </a>
                {% endfor %}
            {% else %}
                <p>Vous n'avez aucune annonce publiée</p>
            {% endif %}
            </div>
        </div>

        <div class="col-xl-3 col-sm-12 col-12" style="background-color:blue; margin:1%">
            <!--pub-->
            <p>
                <br>
                <br>
                <br>
            </p>
        </div>
    </div>
{% endblock %}
